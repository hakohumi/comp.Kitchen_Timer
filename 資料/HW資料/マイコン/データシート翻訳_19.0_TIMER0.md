## 19.0 TIMER0 MODULE

Timer0モジュールは、次の機能を備えた8ビットタイマー/カウンターです。
•8ビットタイマー/カウンターレジスタ（TMR0）
•8ビットプリスケーラー（ウォッチドッグタイマーから独立）
•プログラム可能な内部または外部クロックソース
•プログラム可能な外部クロックエッジ選択
•オーバーフロー時の割り込み
•TMR0は、Timer1をゲートするために使用できます。
図19-1は、Timer0モジュールのブロック図です。

## 19.1 Timer0 Operation

Timer0モジュールは、8ビットタイマーまたは8ビットカウンターとして使用できます。

### 19.1.1 8-BIT TIMER MODE

Timer0モジュールは、プリスケーラーなしで使用される場合、すべての命令サイクルをインクリメントします。 8ビットタイマーモードは、OPTIONレジスタのTMR0CSビットをクリアすると選択されます。
TMR0が書き込まれると、書き込み直後の2命令サイクルのインクリメントが禁止されます。

注：TMR0が書き込まれるときに2命令サイクルの遅延を考慮するために、TMR0レジスタに書き込まれる値を調整できます。

### 19.1.2 8-BIT COUNTER MODE

8ビットカウンターモードでは、Timer0モジュールは、T0CKIピンまたは容量性センシングオシレーター（CPSCLK）信号の立ち上がりエッジまたは立ち下がりエッジごとにインクリメントします。
T0CKIピンを使用する8ビットカウンターモードを選択するには、OPTIONレジスタのTMR0CSビットを「1」に設定し、CPSCON0レジスタのT0XCSビットを「0」にリセットします。
静電容量センシングオシレータ（CPSCLK）信号を使用する8ビットカウンタモードは、OPTIONレジスタのTMR0CSビットを「1」に設定し、CPSCON0レジスタのT0XCSビットを「1」に設定することによって選択されます。
 いずれかの入力ソースのインクリメントエッジの立ち上がりまたは立ち下がり遷移は、OPTIONレジスタのTMR0SEビットによって決定されます。

 ### 19.1.3 SOFTWARE PROGRAMMABLE PRESCALER

ソフトウェアプログラマブルプリスケーラは、Timer0専用に使用できます。プリスケーラは、OPTIONレジスタのPSAビットをクリアすることで有効になります

注：ウォッチドッグタイマー（WDT）は、独自の独立したプリスケーラーを使用します。


Timer0モジュールには、1：2から1：256までの8つのプリスケーラオプションがあります。
 プリスケール値は、OPTIONレジスタのPS <2：0>ビットを介して選択できます。
 Timer0モジュールに1：1のプリスケーラ値を設定するには、OPTIONレジスタのPSAビットを設定してプリスケーラを無効にする必要があります。
 プリスケーラは読み取りまたは書き込みができません。
 TMR0レジスタに書き込むすべての命令は、プリスケーラをクリアします。


 ### 19.1.4 TIMER0 INTERRUPT

TMR0レジスタがFFhから00hにオーバーフローすると、Timer0は割り込みを生成します。
 Timer0割り込みが有効かどうかに関係なく、TMR0レジスタがオーバーフローするたびに、INTCONレジスタのTMR0IF割り込みフラグビットがセットされます。
 TMR0IFビットはソフトウェアでのみクリアできます。
 Timer0の割り込みイネーブルは、INTCONレジスタのTMR0IEビットです。

注：タイマーはスリープ中にフリーズするため、Timer0割り込みはプロセッサをスリープから復帰させることができません。

### 19.1.5 8-BIT COUNTER MODE SYNCHRONIZATION

8ビットカウンタモードでは、T0CKIピンのインクリメントエッジを命令クロックに同期させる必要があります。
 同期は、命令クロックのQ2とQ4サイクルでプリスケーラ出力をサンプリングすることで実現できます。
 外部クロックソースのハイとローの期間は、セクション29.0「電気的仕様」に示すように、タイミング要件を満たしている必要があります。

 ### 19.1.6 OPERATION DURING SLEEP
 
Timer0は、プロセッサがスリープモードのときは動作できません。
 TMR0レジスタの内容は、プロセッサがスリープモードにある間は変更されません。